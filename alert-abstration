import withReactContent from 'sweetalert2-react-content';
import Swal, { SweetAlertOptions, SweetAlertResult } from 'sweetalert2';
import { AppSwalAlerts } from './AppSwalAlerts';

const MySwal = withReactContent(Swal);

type SwallAlertType = 'success' | 'error' | 'warning' | 'info';

interface SwallAlertOptions extends Partial<SweetAlertOptions> {
    showCloseButton?: boolean;
    showCancelButton?: boolean;
    showConfirmButton?: boolean;
    allowOutsideClick?: boolean;
    allowEscapeKey?: boolean;
}

export function swallAlert(
    type: SwallAlertType,
    title?: string,
    message?: string,
    options?: SwallAlertOptions
): Promise<SweetAlertResult<any>> {
    return MySwal.fire({
        html: (
            <AppSwalAlerts
                swal={MySwal}
                type={type}
                title={title ?? ''}
                text={message ?? ''}
            />
        ),
        showCloseButton: options?.showCloseButton ?? true,
        showCancelButton: options?.showCancelButton ?? false,
        showConfirmButton: options?.showConfirmButton ?? true,
        allowOutsideClick: options?.allowOutsideClick ?? true,
        allowEscapeKey: options?.allowEscapeKey ?? true,
        ...options,
    });
}
